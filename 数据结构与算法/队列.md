# 队列(queue)

## before
CPU 资源是有限的，任务的处理速度与线程个数并不是线性正相关。相反，过多的线程反而会导致 CPU 频繁切换，处理性能下降。

## 特性
1. 排队，先进先出。
2. 也是一种操作受限的线性表数据（same as 栈

## 顺序队列
## 链式队列
链式 手动搬移数据
## 循环队列
- 确定好队空和队满的判定条件。  
![](https://static001.geekbang.org/resource/image/3d/ec/3d81a44f8c42b3ceee55605f9aeedcec.jpg?wh=1142*640)
tail=3，head=4，n=8，所以总结一下规律就是：(3+1)%8=4。多画几张队满的图，你就会发现，当队满时，(tail+1)%n=head。

## 阻塞队列和并发队列
### 阻塞队列
在队列基础上增加了阻塞操作。  
- 在队列为空的时候，从队头取数据会被阻塞。因为此时还没有数据可取，直到队列中有了数据才能返回；
- 如果队列已经满了，那么插入数据的操作就会被阻塞，直到队列中有空闲位置后再插入数据，然后再返回。

“生产者 - 消费者模型”
![](https://static001.geekbang.org/resource/image/5e/eb/5ef3326181907dea0964f612890185eb.jpg?wh=1141*499)

通过协调“生产者”和“消费者”的个数，来提高数据的处理效率。比如可以多配置几个“消费者”，来应对一个“生产者”。  
在多线程情况下，会有多个线程同时操作队列，这个时候就会存在线程安全问题。
## 并发队列
线程安全的队列。

## TODO
链表实现队列

# ？
链式队列数据搬移？链表长度？////
阻塞队列，列表为空时取数据阻塞
线程安全问题
原子操作
并发队列