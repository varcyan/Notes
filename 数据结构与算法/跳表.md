# 跳表

二分查找依赖数组随机访问的特性，因此只能用数组实现  
链表不能用二分查找  
把链表稍加改造，为跳表

- 动态数据结构
- 支持快速地插入、删除、查找操作

## 设计思路

空间换时间

## 如何建立跳表

为有序链表建立多级索引层

插入、删除、查找的时间复杂度都是O(logn)  
空间复杂度是O(n)

## 浪费内存？

我们不必太在意索引占用的额外空间。  
在讲数据结构和算法时，我们习惯性地把要处理的数据看成整数，但是在实际的软件开发中，原始链表中存储的有可能是很大的对象，而索引结点只需要存储关键值和几个指针，并不需要存储对象，所以当对象比索引结点大很多时，那索引占用的额外空间就可以忽略了。

## 高效动态从插入和删除

[插入](https://static001.geekbang.org/resource/image/65/6c/65379f0651bc3a7cfd13ab8694c4d26c.jpg?wh=1142*844)
删除：删除前驱节点

## 跳表索引动态更新

如果不停插入数据，不更新索引，可能出现2个索引点之间数据非常多，极端情况下，跳表退化为链表。  
使用随机函数生成值k，在第一级到k级中将新增节点加到索引，从概率上保证跳表的索引大小和数据大小平衡性。不至于性能退化。

## 跳表 vs 红黑树

相同：

- 插入、删除、查找以及迭代删除有序序列，时间复杂度一致

不同:

- 按区间查找数据，红黑树效率没有跳表高
- 跳表更容易实现，可读性强。
- 跳表灵活，通过改变索引构建策略，有效平衡执行效率和内存消耗。
- 跳表要自己实现，红黑树现成。

## TODO

[红黑树](https://zh.wikipedia.org/wiki/%E7%BA%A2%E9%BB%91%E6%A0%91)
? 为什么是两个节点
？如何查找前驱节点
？删除后 索引层更新
随机函数
